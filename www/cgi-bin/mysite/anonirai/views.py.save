from django.shortcuts import render
from django.http import HttpResponse
from . import forms
import json
from requests_oauthlib import OAuth1Session

CONSUMER_KEY = "5pDD1WnHToxvgXMckqnsFkTE2"
CONSUMER_SECRET ="HXLjOpX1B0kCZe4xvVvP1c3WW1fSnoGXTl3SF5DVWYoCxy2dlv"

ACCESS_TOKEN = "1185682754899365889-KnEWmOua1xKmKfkoafPo6IObydY2Nr"
ACCESS_TOKEN_SECRET = "kIr8JsRi0I9ZeDblyD6RjzomuYXuvVh636SMupTN0WNvS"


CK = CONSUMER_KEY
CS = CONSUMER_SECRET
AT = ACCESS_TOKEN
ATS = ACCESS_TOKEN_SECRET
twitter = OAuth1Session(CK, CS, AT, ATS)
url = "https://api.twitter.com/1.1/statuses/update.json"

# Create your views here.
def index(request):
    return HttpResponse("Hello, world. You're the arai-san.")

def anonirai(request):
    form = forms.SendTweet()
    d ={
        "form": form,
    }
    return render(request, 'anonirai.html', d)

def result(request):
    result_tweet = request.GET.get('tweet')
    if(result_tweet.find('@')==-1 and result_tweet.find('/')==-1):
        params = {"status" : result_tweet}
        res = twitter.post(url, params = params)
        return render(request, 'result.html', {'tweet': result_tweet})
    elif:
    else:
        return render(request, 'error.html')
